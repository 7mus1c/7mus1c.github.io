# 队列是什么？

队列是一个先进先出的数据结构。简单点来讲队列就是日常的排队，先来的人先服务，后来的人后服务。
JavaScript 没有队列的数据结构，但是可以通过数组来模拟队列。通过数组的 push 和 shift 方法，实现队列的先进先出。

# 队列的常用操作

## 入队

入队就是向队列中添加元素，使用数组的 push 方法。

```js
const queue = [];
queue.push(1);
queue.push(2);
queue.push(3);
```

## 出队

出队就是从队列中删除元素，使用数组的 shift 方法。

```js
queue.shift();
queue.shift();
queue.shift();
```

## 什么场景用队列？

所有先进先出的场景，比如食堂排队打饭、JS 异步任务的任务队列、计算最近请求次数等。

### 食堂排队打饭

食堂只留一个窗口，学生排队打饭，先进先出，保证有序。


### JS 异步任务的任务队列

JS 是单线程的，异步任务会先放入任务队列中，等待主线程空闲后再执行，保证异步任务的有序执行。

使用队列先进先出的特性先后处理异步任务。


### 计算最近请求次数

const inputs = [[1], [100], [3001], [3002]];
const outputs = [1, 2, 3, 3];

比如输入3000， 那就计算3000ms内请求的次数，大于3000ms的请求不计入。

有新的请求就入队，3000ms前发出的请求出队。
队列的长度就是最近请求的次数。


1ms 的时候入队一个请求，出队0个请求，此时队列长度为 1
100ms的时候入队一个请求，出 队0个请求，此时队列长度为 2
3001ms 的时候入队一个请求，出队0个请求，此时队列长度为 3
3002ms 的时候入队一个请求，出队1个请求，此时队列长度为 3


## 933.最近请求次数
```ts
/**
 * 最近的请求次数
 * 解体思路：
 * 1. 越早发出的请求越早不在3000ms内，需要被移除。
 * 2. 因此它就是一个先进先出，考虑使用队列。
 * 解体步骤：
 * 1. 先建一个队列
 * 2. 有新请求就入队
 * 3. 把3000毫秒前的请求出队
 * 4. 队列的长度就是最近的请求次数，返回队列长度
 * @param {number} t 时间戳
 * @return {number} 过去 3000 毫秒内的请求数
 */
class RecentCounter {
    queue: number[];
  constructor() {
    this.queue = []; // 队列
  }

  ping(t: number): number {
    this.queue.push(t); // 新请求入队
    while(this.queue[0] < t - 3000) {
      this.queue.shift(); // 把3000ms前的请求出队
    }

    return this.queue.length; // 队列的长度就是最近的请求次数
  }
}
```
时间复杂度: O(N) 因为有while循环 n就是被踢出队列的个数
空间复杂度: O(N) n就是最近的请求次数